const signinForm=document.querySelector("form"),signin=async(e,n)=>{console.log(e,n);try{return await(await fetch("https://dummyjson.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n,expiresInMins:60})})).json()}catch(e){console.error(e)}},setTokenCookie=(e,n)=>{var o=new Date,n=(o.setTime(o.getTime()+60*n*1e3),"expires="+o.toUTCString());document.cookie="token="+e+"; "+n+"; path=/"};signinForm.addEventListener("submit",async e=>{e.preventDefault();var e=document.getElementById("username"),n=document.getElementById("password"),e=await signin(e.value,n.value),n=("Invalid credentials"==e.message&&console.log("invalid"),e)["token"];setTokenCookie(n,60),window.location.href="../index.html?id="+e.id}),"/pages/login.html"===window.location.pathname&&token&&(window.location.href="../index.html");